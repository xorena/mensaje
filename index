<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Dedicatoria a David — Certificado Ciberseguro</title>
<style>
  :root{
    --bg:#071010;
    --card:#0c1113cc;
    --accent:#39ff14;
    --muted:#9db0b0;
    --glass: rgba(255,255,255,0.03);
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:var(--bg);color:#e7f6f6;font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif}
  #matrix{position:fixed;inset:0;z-index:-1}
  .wrap{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:20px}
  .card{
    width:min(920px,94vw); border-radius:16px; overflow:hidden;
    background:linear-gradient(180deg,#0b1112cc,#081012ee);
    border:1px solid rgba(63,255,127,0.06); box-shadow:0 18px 50px rgba(0,0,0,0.7);
    backdrop-filter: blur(6px);
  }
  header{padding:28px 26px 8px;text-align:center}
  .badge{font-size:.78rem; letter-spacing:.18em; text-transform:uppercase; color:#9ff; opacity:.9}
  h1{margin:.25rem 0 0; font-size:clamp(1.6rem,2.8vw,2.2rem);
      background:linear-gradient(90deg,#9ff,#6ff,#3ff); -webkit-background-clip:text; color:transparent}
  .subtitle{color:var(--muted); margin:.4rem 0 10px;font-size:.95rem}
  .body{display:grid; gap:16px; padding:18px; grid-template-columns:1fr}
  @media(min-width:760px){ .body{grid-template-columns:1.25fr .75fr} }

  .panel{background:var(--glass); border-radius:12px; padding:16px; border:1px solid rgba(255,255,255,0.03)}
  .ascii{font-family:ui-monospace,Menlo,Monaco,monospace; color:#bff; white-space:pre; font-size:12px; line-height:1}
  .quote{font-style:italic; color:#cfe; margin-top:10px; border-left:3px solid #2fd; padding-left:12px}
  .ded{margin-top:12px; color:#eaf; line-height:1.45}
  .ded strong{color:#dff}
  .meta{display:grid; grid-template-columns:1fr 1fr; gap:8px; margin-top:12px; font-family:ui-monospace,monospace}
  .muted{color:var(--muted); font-size:.9rem}

  .right .verify{display:grid; gap:10px}
  input, button, textarea{font:inherit}
  input{width:100%; padding:10px 12px; border-radius:10px; background:#071012; border:1px solid #163233; color:#dff}
  button{padding:10px 12px; border-radius:10px; border:none; cursor:pointer; font-weight:700}
  .primary{background:linear-gradient(180deg,#17f58f,#07c9c9); color:#043; box-shadow:0 8px 20px rgba(0,255,150,0.08)}
  .secondary{background:transparent; border:1px solid rgba(150,200,200,0.06); color:#bfe}
  .codebox{background:#051011; padding:10px; border-radius:10px; font-family:ui-monospace,monospace; font-size:.85rem; color:#cff; word-break:break-all; border:1px dashed rgba(30,120,120,0.08)}
  .footer{display:flex; gap:10px; padding:12px 18px; align-items:center; justify-content:center}
  .small{font-size:.85rem;color:var(--muted)}
  img.group{width:100%;margin-top:12px;border-radius:12px;box-shadow:0 6px 20px rgba(0,0,0,0.6)}
</style>
</head>
<body>
<canvas id="matrix" aria-hidden="true"></canvas>

<div class="wrap">
  <article class="card" role="region" aria-label="Dedicatoria a David">
    <header>
      <div class="badge">Certificado de Reconocimiento Ciberseguro</div>
      <h1>En reconocimiento a <span style="color:#9ff">David</span></h1>
      <p class="subtitle">Por su dedicación en <strong>Seguridad Informática</strong> y por inspirar buenas prácticas, pensamiento crítico y ética profesional.</p>
    </header>

    <div class="body">
      <section class="panel left">
        <div class="ascii" aria-hidden="true">
      __________
     / ________ \
    / /  ____  \ \
   | |  |__  |  | |
   | |   __| |  | |
   | |  |____|  | |
   | |__________| |
   |  __________  |
   | |          | |
   | |   ▓▓▓▓   | |
   | |          | |
   | |__________| |
   |______________|
        </div>

        <!-- Aquí insertamos la foto -->
        <img src="foto_grupo.jpg" alt="Foto del grupo con David" class="group">

        <p class="quote">«La seguridad no es un producto, es un proceso» — Bruce Schneier</p>

        <div class="ded">
          <p>David, gracias por tu paciencia, por transmitir tu pasión por la ciberseguridad y por enseñarnos a pensar como defensores responsables. Tu esfuerzo ha marcado a cada uno de nosotros y nos ha hecho mejores profesionales.</p>
          <p><strong>Te queremos también.</strong></p>
        </div>

        <div class="meta small" style="margin-top:14px">
          <div>Emitido el:<br><strong id="issued">—</strong></div>
          <div>Otorgado por:<br><strong id="by">Un/a alumno/a agradecido/a</strong></div>
        </div>
      </section>

      <aside class="panel right">
        <h3 style="margin:0 0 6px">Verificación (en tu navegador)</h3>
        <p class="muted" style="margin-top:0">Genera la huella SHA-256 y la firma HMAC-SHA256 del texto del certificado sin enviar nada a servidores.</p>

        <div class="verify" style="margin-top:8px">
          <label for="key">Clave para HMAC (elige una):</label>
          <input id="key" type="password" placeholder="Introduce una clave secreta" autocomplete="off" />

          <div style="display:flex;gap:8px">
            <button id="btn-hash" class="primary" aria-controls="sha hmac">Calcular huella y firma</button>
            <button id="btn-copy" class="secondary">Copiar dedicatoria</button>
          </div>

          <div style="margin-top:8px">
            <small>Huella SHA-256</small>
            <div id="sha" class="codebox">—</div>
          </div>
          <div style="margin-top:8px">
            <small>Firma HMAC-SHA256</small>
            <div id="hmac" class="codebox">—</div>
          </div>
        </div>
      </aside>
    </div>

    <div class="footer">
      <button id="btn-print" class="primary">Imprimir / Guardar PDF</button>
      <div class="small">Documento generado localmente en tu navegador — nadie lo recibe.</div>
    </div>
  </article>
</div>

<script>
/* Matrix rain */
(function(){
  const canvas = document.getElementById('matrix');
  const ctx = canvas.getContext('2d');
  let fontSize = 16, columns=0, drops=[];
  const chars = 'アァカサタナハマヤラワ0123456789ABCDEF$#/*=+-<>[]{}';
  function resize(){
    canvas.width = innerWidth; canvas.height = innerHeight;
    columns = Math.floor(canvas.width / fontSize);
    drops = new Array(columns).fill(1);
  }
  resize(); window.addEventListener('resize',resize);
  function draw(){
    ctx.fillStyle='rgba(0,6,6,0.16)'; ctx.fillRect(0,0,canvas.width,canvas.height);
    ctx.fillStyle='#39ff14'; ctx.font=fontSize+'px monospace';
    for(let i=0;i<drops.length;i++){
      const text=chars[Math.floor(Math.random()*chars.length)];
      const x=i*fontSize, y=drops[i]*fontSize;
      ctx.fillText(text,x,y);
      if(y>canvas.height && Math.random()>0.975) drops[i]=0;
      drops[i]++;
    }
    requestAnimationFrame(draw);
  }
  draw();
})();

/* Fecha */
(function(){
  const issued=document.getElementById('issued');
  const now=new Date();
  issued.textContent=new Intl.DateTimeFormat('es-ES',{
    year:'numeric',month:'2-digit',day:'2-digit',hour:'2-digit',minute:'2-digit'
  }).format(now).replace(',','');
})();

/* Texto del certificado */
function getCertificateText(){
  const issued=document.getElementById('issued').textContent.trim();
  const by=document.getElementById('by').textContent.trim();
  return [
    'En reconocimiento a David',
    'Asignatura: Seguridad Informática',
    'Dedicatoria: David, gracias por tu paciencia, por transmitir tu pasión por la ciberseguridad y por enseñarnos a pensar como defensores responsables. Tu esfuerzo ha marcado a cada uno de nosotros y nos ha hecho mejores profesionales.',
    'Mensaje final: Te queremos también.',
    'Emitido el: '+issued,
    'Otorgado por: '+by
  ].join('\\n');
}

/* Copiar texto */
document.getElementById('btn-copy').addEventListener('click', async ()=>{
  try{await navigator.clipboard.writeText(getCertificateText());alert('Texto copiado');}
  catch(e){alert('No se pudo copiar automáticamente');}
});

/* Hash y HMAC */
async function sha256Hex(t){const b=new TextEncoder().encode(t);const h=await crypto.subtle.digest('SHA-256',b);return Array.from(new Uint8Array(h)).map(x=>x.toString(16).padStart(2,'0')).join('');}
async function hmac256Hex(k,t){const kd=new TextEncoder().encode(k);const key=await crypto.subtle.importKey('raw',kd,{name:'HMAC',hash:'SHA-256'},false,['sign']);const sig=await crypto.subtle.sign('HMAC',key,new TextEncoder().encode(t));return Array.from(new Uint8Array(sig)).map(x=>x.toString(16).padStart(2,'0')).join('');}
document.getElementById('btn-hash').addEventListener('click',async()=>{
  const key=document.getElementById('key').value, text=getCertificateText();
  document.getElementById('sha').textContent='...'; document.getElementById('hmac').textContent='...';
  const sha=await sha256Hex(text); document.getElementById('sha').textContent=sha;
  if(key){document.getElementById('hmac').textContent=await hmac256Hex(key,text);} else {document.getElementById('hmac').textContent='Introduce clave para HMAC';}
});

/* Imprimir */
document.getElementById('btn-print').addEventListener('click',()=>window.print());
</script>
</body>
</html>
